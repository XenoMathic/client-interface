<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PharmaGO - Votre assistant pharmacie</title>
  <style>
    :root {
      --primary: #0069d9;
      --accent: #ff6f61;
      --card: #fff;
      --border: #d1e3f0;
      --text: #1f2d3d;
      --radius: 12px;
      --spacing: 1rem;
      --shadow: 0 4px 16px rgba(0,0,0,0.1);
      --speed: .3s;
      --max-width: 1200px;
      --pharma-color: #006400; /* Vert foncé */
      --go-color: #1d00ab;    /* Bleu froid */
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      color: var(--text);
      line-height: 1.5;
      /* Arrière-plan animé vert/blanc */
      background: linear-gradient(45deg, #13a103, #ffffff, #13a103, #ffffff);
      background-size: 400% 400%;
      animation: greenWhiteBG 10s ease infinite;
    }
    @keyframes greenWhiteBG {
      0%   { background-position: 0%   50%; }
      50%  { background-position: 100% 50%; }
      100% { background-position: 0%   50%; }
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--spacing) 2rem;
      background: var(--card);
      box-shadow: var(--shadow);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    header h1 {
      font-size: 1.75rem;
    }
    /* Coloration spécifique de PharmaGO */
    header h1 .pharma { color: var(--pharma-color); }
    header h1 .go { color: var(--go-color); }
    nav a { margin-left: var(--spacing); padding: .5rem 1rem; border-radius: var(--radius); border: 1px solid var(--primary); color: var(--primary); text-decoration: none; transition: background var(--speed), color var(--speed); font-size: 0.9rem; }
    nav a:hover { background: var(--primary); color: #fff; }
    .hero {
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 5rem 2rem;
      background: url('https://st2.depositphotos.com/1003098/8163/i/450/depositphotos_81637954-stock-photo-pharmacy-interior.jpg') no-repeat center/cover;
      background-size: cover;
      color: #fff;
      min-height: 50vh;
      position: relative;
    }
    .hero::before { content: ''; position: absolute; inset: 0; background: rgba(0,0,0,0.6); }
    .hero-content { position: relative; max-width: var(--max-width); margin: 0 1rem; }
    .hero-content h2 { font-size: 2.5rem; margin-bottom: .5rem; }
    .hero-content p { font-size: 1.1rem; }
    #auth, #app { display: none; padding: 2rem 1rem; }
    .form-card { max-width: 400px; width: 90%; margin: 0 auto; background: var(--card); padding: 2rem; border-radius: var(--radius); box-shadow: var(--shadow); }
    .form-card h2 { text-align: center; margin-bottom: 1rem; color: var(--primary); }
    .form-card input { width: 100%; padding: .75rem; margin-bottom: var(--spacing); border: 1px solid var(--border); border-radius: var(--radius); transition: border var(--speed); }
    .form-card input:focus { border-color: var(--primary); outline: none; }
    .form-card button { width: 100%; padding: .75rem; background: var(--accent); border: none; color: #fff; font-weight: 600; border-radius: var(--radius); cursor: pointer; transition: transform var(--speed); }
    .form-card button:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(0,0,0,0.15); }
    .container { width: 100%; max-width: var(--max-width); margin: 0 auto; padding: 0 1rem; }
    .tabs { display: flex; flex-wrap: wrap; gap: .5rem; margin-bottom: var(--spacing); }
    .tab { flex: 1; text-align: center; padding: var(--spacing); background: var(--primary); color: #fff; border-radius: var(--radius); cursor: pointer; transition: background var(--speed); font-size: 1rem; }
    .tab.active, .tab:hover { background: var(--accent); }
    .content-section { display: none; animation: fadeIn var(--speed) ease-in; padding: var(--spacing) 0; }
    .content-section.active { display: block; }
    .card { background: var(--card); padding: var(--spacing); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow); margin-bottom: var(--spacing); }
    .card p, .card ul { margin-bottom: .5rem; }
    .card ul { list-style: disc inside; }
    .action, .paste-btn { display: inline-block; margin-top: var(--spacing); padding: .5rem 1rem; background: var(--accent); color: #fff; border: none; border-radius: var(--radius); cursor: pointer; transition: transform var(--speed); font-size: 0.95rem; }
    .action:hover, .paste-btn:hover { transform: translateY(-2px); }
    #mapEmbed { width: 100%; height: 50vh; max-height: 400px; border: 1px solid var(--border); border-radius: var(--radius); overflow: hidden; }
    textarea { width: 100%; padding: .75rem; border: 1px solid var(--border); border-radius: var(--radius); resize: vertical; font-size: 0.95rem; }
    @media (max-width: 768px) {
      header { flex-direction: column; align-items: flex-start; }
      nav a { display: block; margin: .25rem 0; }
      .hero { padding: 3rem 1rem; min-height: 40vh; }
      .hero-content h2 { font-size: 2rem; }
      .hero-content p { font-size: 1rem; }
      .tabs { flex-direction: column; }
    }
    @media (max-width: 480px) {
      header { padding: var(--spacing); }
      .form-card { padding: var(--spacing); }
      textarea, .action, .paste-btn { font-size: 0.9rem; }
      #mapEmbed { height: 30vh; }
    }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px);} to { opacity: 1; transform: translateY(0);} }
  </style>
</head>
<body>
  <header>
    <h1><span class="pharma">Pharma</span><span class="go">GO</span></h1>
    <nav>
      <a href="#" id="link-login">Se connecter</a>
      <a href="#" id="link-register">Créer un compte</a>
    </nav>
  </header>

  <section class="hero" id="hero-section">
    <div class="hero-content">
      <h2>Votre assistant pharmacie</h2>
      <p>PharmaGo est une application innovante qui facilite l'accès aux médicaments pour les touristes en voyage. Grâce à sa géolocalisation intégrée, elle permet de repérer rapidement les pharmacies les plus proches, de vérifier la disponibilité des produits recherchés, et d’obtenir des informations sur les horaires d’ouverture. Les touristes peuvent ainsi gagner du temps, éviter les barrières linguistiques grâce à des traductions automatiques des ordonnances et noms de médicaments, et se faire livrer directement à leur lieu d’hébergement. PharmaGo offre donc une solution pratique, rapide et rassurante pour gérer les besoins de santé en toute sérénité à l’étranger.</p>
    </div>
  </section>

  <section id="auth">
    <div class="form-card">
      <h2 id="form-title">Se connecter</h2>
      <form id="authForm">
        <input type="text" id="username" placeholder="Nom d'utilisateur" required>
        <input type="password" id="password" placeholder="Mot de passe" required>
        <input type="password" id="confirm" placeholder="Confirmer le mot de passe" style="display:none;">
        <button type="submit" id="authButton">Se connecter</button>
      </form>
    </div>
  </section>

  <section id="app">
    <div class="container">
      <h2>Bonjour, <span id="displayUsername"></span> !</h2>
      <div class="tabs" id="tabs">
        <div class="tab active" data-target="profile">Mes Ordonnances</div>
        <div class="tab" data-target="ordonnance">Décodage</div>
        <div class="tab" data-target="pharmacie">Pharmacie</div>
        <div class="tab" data-target="about">Qui sommes-nous ?</div>
        <div class="tab" data-target="logout">Déconnexion</div>
      </div>
      <div id="profile" class="content-section active"><p>Aucune ordonnance pour le moment.</p></div>
      <div id="ordonnance" class="content-section">
        <textarea id="codeInput" placeholder="Collez le code complet ici..."></textarea>
        <button class="paste-btn" id="pasteBtn">Coller</button>
        <button class="action" id="decodeBtn">Décoder</button>
        <pre id="hiddenCode" style="display:none;"></pre>
        <div id="codeResult"></div>
      </div>
      <div id="pharmacie" class="content-section">
        <button class="action" id="locatePharmacy">Trouver une pharmacie proche</button>
        <div id="mapEmbed"><p>En attente de géolocalisation...</p></div>
      </div>
      <div id="about" class="content-section">
        <div class="card">Nous sommes Basma, Nada, Mehdi, Inès et Mohammed Reda, cinq lycéens passionnés et avides d’aventure, animés par l’esprit d’entreprenariat. Ensemble, nous croyons que la technologie peut simplifier le quotidien et créer des liens plus forts entre les personnes, même loin de chez elles. Chacun de nous apporte une compétence unique. Notre ambition ? Créer des solutions pratiques qui répondent à de vrais besoins, tout en apprenant et grandissant ensemble dans cette aventure entrepreneuriale.</div>
      </div>
      <div id="logout" class="content-section">
        <button class="action" id="logoutBtn">Déconnexion</button>
      </div>
    </div>
  </section>

  <script>
    const heroSection = document.getElementById('hero-section');
    const authSection = document.getElementById('auth');
    const appSection = document.getElementById('app');
    const linkLogin = document.getElementById('link-login');
    const linkRegister = document.getElementById('link-register');
    const formTitle = document.getElementById('form-title');
    const authForm = document.getElementById('authForm');
    const authButton = document.getElementById('authButton');
    const confirmInput = document.getElementById('confirm');
    const displayUsername = document.getElementById('displayUsername');
    let registerMode = false;

    function showAuth() {
      heroSection.style.display = 'none';
      authSection.style.display = 'block';
    }
    linkLogin.addEventListener('click', e => { e.preventDefault(); registerMode = false; formTitle.textContent = 'Se connecter'; authButton.textContent = 'Se connecter'; confirmInput.style.display = 'none'; showAuth(); });
    linkRegister.addEventListener('click', e => { e.preventDefault(); registerMode = true; formTitle.textContent = 'Créer un compte'; authButton.textContent = 'Créer un compte'; confirmInput.style.display = 'block'; showAuth(); });

    authForm.addEventListener('submit', e => {
      e.preventDefault();
      const user = document.getElementById('username').value.trim();
      const pass = document.getElementById('password').value;
      if (!user || !pass) return alert('Tous les champs sont requis.');
      if (registerMode) {
        const conf = confirmInput.value;
        if (pass.length < 6) return alert('Le mot de passe doit contenir au moins 6 caractères.');
        if (pass !== conf) return alert('Les mots de passe ne correspondent pas.');
        localStorage.setItem('user_' + user, JSON.stringify({ password: pass }));
        localStorage.setItem('ordonnances_' + user, JSON.stringify([]));
      } else {
        const stored = JSON.parse(localStorage.getItem('user_' + user) || 'null');
        if (!stored || stored.password !== pass) return alert('Identifiants invalides.');
      }
      displayUsername.textContent = user;
      document.querySelector('header nav').style.display = 'none';
      authSection.style.display = 'none';
      appSection.style.display = 'block';
      initApp(user);
    });

    function initApp(user) {
      setupTabs();
      loadProfile(user);
      setupDecode(user);
      setupMap();
      setupLogout();
    }

    function setupTabs() {
      document.querySelectorAll('.tab').forEach(tab => tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById(tab.dataset.target).classList.add('active');
      }));
    }

    function loadProfile(user) {
      const div = document.getElementById('profile');
      div.innerHTML = '';
      const list = JSON.parse(localStorage.getItem('ordonnances_' + user) || '[]');
      if (!list.length) { div.innerHTML = '<p>Aucune ordonnance pour le moment.</p>'; return; }
      list.forEach((ord, i) => {
        const card = document.createElement('div');
        card.className = 'card';
        let html = `<h4>#${i+1} - ${ord.date}</h4><p><strong>ID :</strong> ${ord.id}</p><p><strong>Patient :</strong> ${ord.patient}</p><ul>`;
        ord.prescription.forEach(item => html += `<li>${item.medicament} (${item.frequence}x/j, ${item.duree}j)</li>`);
        html += `</ul><button class="action delete-btn" data-index="${i}">Supprimer</button>`;
        card.innerHTML = html;
        div.append(card);
      });
      document.querySelectorAll('.delete-btn').forEach(btn => btn.addEventListener('click', () => {
        const idx = +btn.dataset.index;
        const arr = JSON.parse(localStorage.getItem('ordonnances_' + user));
        arr.splice(idx, 1);
        localStorage.setItem('ordonnances_' + user, JSON.stringify(arr));
        loadProfile(user);
      }));
    }

    function setupDecode(user) {
      const pasteBtn = document.getElementById('pasteBtn');
      const hiddenCode = document.getElementById('hiddenCode');
      pasteBtn.addEventListener('click', async () => {
        try { const text = await navigator.clipboard.readText(); hiddenCode.textContent = text.trim(); document.getElementById('codeInput').value = text.slice(0, 12); }
        catch { alert('Impossible de coller'); }
      });
      document.getElementById('decodeBtn').addEventListener('click', () => {
        const full = hiddenCode.textContent;
        if (!full) return alert('Collez d abord un code');
        try {
          const obj = JSON.parse(atob(full.slice(12)));
          obj.date = new Date().toLocaleDateString('fr-FR');
          obj.id = full.slice(0, 12);
          const listArr = JSON.parse(localStorage.getItem('ordonnances_' + user) || '[]');
          listArr.push(obj);
          localStorage.setItem('ordonnances_' + user, JSON.stringify(listArr));
          loadProfile(user);
          document.getElementById('codeResult').innerHTML = `<div class="card"><h4>Ordonnance décodée</h4><ul>${obj.prescription.map(it => `<li>${it.medicament} - ${it.frequence}x/j</li>`).join('')}</ul></div>`;
        } catch { alert('Code invalide'); }
      });
    }

    function setupMap() {
      document.getElementById('locatePharmacy').addEventListener('click', () => {
        const m = document.getElementById('mapEmbed');
        m.innerHTML = '<p>Chargement de la carte...</p>';
        if (!navigator.geolocation) { m.innerHTML = '<p>Géolocalisation non supportée.</p>'; return; }
        navigator.geolocation.getCurrentPosition(pos => {
          const { latitude, longitude } = pos.coords;
          m.innerHTML = `<iframe src="https://maps.google.com/maps?q=pharmacie&ll=${latitude},${longitude}&z=15&output=embed" width="100%" height="100%" style="border:0;" allowfullscreen loading="lazy"></iframe>`;
        }, () => { m.innerHTML = '<p>Localisation impossible.</p>'; });
      });
    }

    function setupLogout() { document.getElementById('logoutBtn').addEventListener('click', () => location.reload()); }
  </script>
</body>
</html>


